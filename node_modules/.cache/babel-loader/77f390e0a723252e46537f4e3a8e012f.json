{"ast":null,"code":"import { useState, useLayoutEffect } from 'react';\nimport { shade } from 'polished';\nimport Vibrant from 'node-vibrant';\nimport { hex } from 'wcag-contrast';\n\nasync function getColorFromToken(token) {\n  const path = `https://raw.githubusercontent.com/pangolindex/tokens/main/assets/${token.address}/logo.png`;\n  return Vibrant.from(path).getPalette().then(palette => {\n    if (palette === null || palette === void 0 ? void 0 : palette.Vibrant) {\n      let detectedHex = palette.Vibrant.hex;\n      let AAscore = hex(detectedHex, '#FFF');\n\n      while (AAscore < 3) {\n        detectedHex = shade(0.005, detectedHex);\n        AAscore = hex(detectedHex, '#FFF');\n      }\n\n      return detectedHex;\n    }\n\n    return null;\n  }).catch(() => null);\n}\n\nexport function useColor(token) {\n  const [color, setColor] = useState('#2172E5');\n  useLayoutEffect(() => {\n    let stale = false;\n\n    if (token) {\n      getColorFromToken(token).then(tokenColor => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor);\n        }\n      });\n    }\n\n    return () => {\n      stale = true;\n      setColor('#2172E5');\n    };\n  }, [token]);\n  return color;\n}","map":{"version":3,"sources":["/Users/sidshekhar/Documents/interface/src/hooks/useColor.ts"],"names":["useState","useLayoutEffect","shade","Vibrant","hex","getColorFromToken","token","path","address","from","getPalette","then","palette","detectedHex","AAscore","catch","useColor","color","setColor","stale","tokenColor"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,eAAnB,QAA0C,OAA1C;AACA,SAASC,KAAT,QAAsB,UAAtB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,SAASC,GAAT,QAAoB,eAApB;;AAGA,eAAeC,iBAAf,CAAiCC,KAAjC,EAAuE;AACrE,QAAMC,IAAI,GAAI,oEAAmED,KAAK,CAACE,OAAQ,WAA/F;AAEA,SAAOL,OAAO,CAACM,IAAR,CAAaF,IAAb,EACJG,UADI,GAEJC,IAFI,CAECC,OAAO,IAAI;AACf,QAAIA,OAAJ,aAAIA,OAAJ,uBAAIA,OAAO,CAAET,OAAb,EAAsB;AACpB,UAAIU,WAAW,GAAGD,OAAO,CAACT,OAAR,CAAgBC,GAAlC;AACA,UAAIU,OAAO,GAAGV,GAAG,CAACS,WAAD,EAAc,MAAd,CAAjB;;AACA,aAAOC,OAAO,GAAG,CAAjB,EAAoB;AAClBD,QAAAA,WAAW,GAAGX,KAAK,CAAC,KAAD,EAAQW,WAAR,CAAnB;AACAC,QAAAA,OAAO,GAAGV,GAAG,CAACS,WAAD,EAAc,MAAd,CAAb;AACD;;AACD,aAAOA,WAAP;AACD;;AACD,WAAO,IAAP;AACD,GAbI,EAcJE,KAdI,CAcE,MAAM,IAdR,CAAP;AAeD;;AAED,OAAO,SAASC,QAAT,CAAkBV,KAAlB,EAAiC;AACtC,QAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,SAAD,CAAlC;AAEAC,EAAAA,eAAe,CAAC,MAAM;AACpB,QAAIkB,KAAK,GAAG,KAAZ;;AAEA,QAAIb,KAAJ,EAAW;AACTD,MAAAA,iBAAiB,CAACC,KAAD,CAAjB,CAAyBK,IAAzB,CAA8BS,UAAU,IAAI;AAC1C,YAAI,CAACD,KAAD,IAAUC,UAAU,KAAK,IAA7B,EAAmC;AACjCF,UAAAA,QAAQ,CAACE,UAAD,CAAR;AACD;AACF,OAJD;AAKD;;AAED,WAAO,MAAM;AACXD,MAAAA,KAAK,GAAG,IAAR;AACAD,MAAAA,QAAQ,CAAC,SAAD,CAAR;AACD,KAHD;AAID,GAfc,EAeZ,CAACZ,KAAD,CAfY,CAAf;AAiBA,SAAOW,KAAP;AACD","sourcesContent":["import { useState, useLayoutEffect } from 'react'\nimport { shade } from 'polished'\nimport Vibrant from 'node-vibrant'\nimport { hex } from 'wcag-contrast'\nimport { Token } from '@pangolindex/sdk'\n\nasync function getColorFromToken(token: Token): Promise<string | null> {\n  const path = `https://raw.githubusercontent.com/pangolindex/tokens/main/assets/${token.address}/logo.png`\n\n  return Vibrant.from(path)\n    .getPalette()\n    .then(palette => {\n      if (palette?.Vibrant) {\n        let detectedHex = palette.Vibrant.hex\n        let AAscore = hex(detectedHex, '#FFF')\n        while (AAscore < 3) {\n          detectedHex = shade(0.005, detectedHex)\n          AAscore = hex(detectedHex, '#FFF')\n        }\n        return detectedHex\n      }\n      return null\n    })\n    .catch(() => null)\n}\n\nexport function useColor(token?: Token) {\n  const [color, setColor] = useState('#2172E5')\n\n  useLayoutEffect(() => {\n    let stale = false\n\n    if (token) {\n      getColorFromToken(token).then(tokenColor => {\n        if (!stale && tokenColor !== null) {\n          setColor(tokenColor)\n        }\n      })\n    }\n\n    return () => {\n      stale = true\n      setColor('#2172E5')\n    }\n  }, [token])\n\n  return color\n}\n"]},"metadata":{},"sourceType":"module"}