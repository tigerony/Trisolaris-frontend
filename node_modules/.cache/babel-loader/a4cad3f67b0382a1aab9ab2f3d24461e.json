{"ast":null,"code":"import { useActiveWeb3React } from '../../hooks';\nimport { useAirdropContract } from '../../hooks/useContract';\nimport { calculateGasMargin } from '../../utils';\nimport { useTransactionAdder } from '../transactions/hooks';\nimport { TokenAmount, JSBI } from '@pangolindex/sdk';\nimport { PNG } from './../../constants/index';\nimport { useSingleCallResult } from '../multicall/hooks';\nexport function useAirdropIsClaimingAllowed() {\n  const airdropContract = useAirdropContract();\n  const claimingAllowedResult = useSingleCallResult(airdropContract, 'claimingAllowed', []);\n  return Boolean(!claimingAllowedResult.loading && claimingAllowedResult.result != undefined && claimingAllowedResult.result[0] === true);\n}\nexport function useUserHasAvailableClaim(account) {\n  var _withdrawAmountResult;\n\n  const airdropContract = useAirdropContract();\n  const withdrawAmountResult = useSingleCallResult(airdropContract, 'withdrawAmount', [account ? account : undefined]);\n  return Boolean(account && !withdrawAmountResult.loading && withdrawAmountResult.result != undefined && !JSBI.equal(JSBI.BigInt((_withdrawAmountResult = withdrawAmountResult.result) === null || _withdrawAmountResult === void 0 ? void 0 : _withdrawAmountResult[0]), JSBI.BigInt(0)));\n}\nexport function useUserUnclaimedAmount(account) {\n  var _withdrawAmountResult2;\n\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const canClaim = useUserHasAvailableClaim(account);\n  const airdropContract = useAirdropContract();\n  const withdrawAmountResult = useSingleCallResult(airdropContract, 'withdrawAmount', [account ? account : undefined]);\n  const png = chainId ? PNG[chainId] : undefined;\n  if (!png) return undefined;\n\n  if (!canClaim) {\n    return new TokenAmount(png, JSBI.BigInt(0));\n  }\n\n  return new TokenAmount(png, JSBI.BigInt((_withdrawAmountResult2 = withdrawAmountResult.result) === null || _withdrawAmountResult2 === void 0 ? void 0 : _withdrawAmountResult2[0]));\n}\nexport function useClaimCallback(account) {\n  const {\n    library,\n    chainId\n  } = useActiveWeb3React();\n  const addTransaction = useTransactionAdder();\n  const airdropContract = useAirdropContract();\n\n  const claimCallback = async function () {\n    if (!account || !library || !chainId || !airdropContract) return;\n    return airdropContract.estimateGas['claim']({}).then(estimatedGasLimit => {\n      return airdropContract.claim({\n        value: null,\n        gasLimit: calculateGasMargin(estimatedGasLimit)\n      }).then(response => {\n        addTransaction(response, {\n          summary: `Claimed PNG`,\n          claim: {\n            recipient: account\n          }\n        });\n        return response.hash;\n      }).catch(error => {\n        console.log(error);\n        return \"\";\n      });\n    });\n  };\n\n  return {\n    claimCallback\n  };\n}","map":{"version":3,"sources":["/Users/sidshekhar/Documents/interface/src/state/airdrop/hooks.ts"],"names":["useActiveWeb3React","useAirdropContract","calculateGasMargin","useTransactionAdder","TokenAmount","JSBI","PNG","useSingleCallResult","useAirdropIsClaimingAllowed","airdropContract","claimingAllowedResult","Boolean","loading","result","undefined","useUserHasAvailableClaim","account","withdrawAmountResult","equal","BigInt","useUserUnclaimedAmount","chainId","canClaim","png","useClaimCallback","library","addTransaction","claimCallback","estimateGas","then","estimatedGasLimit","claim","value","gasLimit","response","summary","recipient","hash","catch","error","console","log"],"mappings":"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","sourcesContent":["import { TransactionResponse } from '@ethersproject/providers'\nimport { useActiveWeb3React } from '../../hooks'\nimport { useAirdropContract } from '../../hooks/useContract'\nimport { calculateGasMargin } from '../../utils'\nimport { useTransactionAdder } from '../transactions/hooks'\nimport { TokenAmount, JSBI } from '@pangolindex/sdk'\nimport { PNG } from './../../constants/index'\nimport { useSingleCallResult } from '../multicall/hooks'\n\nexport function useAirdropIsClaimingAllowed(): boolean {\n\tconst airdropContract = useAirdropContract()\n\tconst claimingAllowedResult = useSingleCallResult(airdropContract, 'claimingAllowed', [])\n\treturn Boolean(!claimingAllowedResult.loading && claimingAllowedResult.result != undefined && claimingAllowedResult.result[0] === true)\n}\n\nexport function useUserHasAvailableClaim(account: string | null | undefined): boolean {\n\tconst airdropContract = useAirdropContract()\n\tconst withdrawAmountResult = useSingleCallResult(airdropContract, 'withdrawAmount', [account ? account : undefined])\n\treturn Boolean(account && !withdrawAmountResult.loading && withdrawAmountResult.result != undefined && !JSBI.equal(JSBI.BigInt(withdrawAmountResult.result?.[0]), JSBI.BigInt(0)))\n}\n\nexport function useUserUnclaimedAmount(account: string | null | undefined): TokenAmount | undefined {\n\tconst { chainId } = useActiveWeb3React()\n\n\tconst canClaim = useUserHasAvailableClaim(account)\n\tconst airdropContract = useAirdropContract()\n\tconst withdrawAmountResult = useSingleCallResult(airdropContract, 'withdrawAmount', [account ? account : undefined])\n\n\tconst png = chainId ? PNG[chainId] : undefined\n\tif (!png) return undefined\n\tif (!canClaim) {\n\t\treturn new TokenAmount(png, JSBI.BigInt(0))\n\t}\n\treturn new TokenAmount(png, JSBI.BigInt(withdrawAmountResult.result?.[0]))\n}\n\nexport function useClaimCallback(\n\taccount: string | null | undefined\n): {\n\tclaimCallback: () => Promise<string>\n} {\n\tconst { library, chainId } = useActiveWeb3React()\n\n\tconst addTransaction = useTransactionAdder()\n\tconst airdropContract = useAirdropContract()\n\n\tconst claimCallback = async function () {\n\t\tif (!account || !library || !chainId || !airdropContract) return\n\n\t\treturn airdropContract.estimateGas['claim']({}).then(estimatedGasLimit => {\n\t\t\treturn airdropContract\n\t\t\t\t.claim({ value: null, gasLimit: calculateGasMargin(estimatedGasLimit) })\n\t\t\t\t.then((response: TransactionResponse) => {\n\t\t\t\t\taddTransaction(response, {\n\t\t\t\t\t\tsummary: `Claimed PNG`,\n\t\t\t\t\t\tclaim: { recipient: account }\n\t\t\t\t\t})\n\t\t\t\t\treturn response.hash\n\t\t\t\t})\n\t\t\t\t.catch((error: any) => {\n\t\t\t\t\tconsole.log(error)\n\t\t\t\t\treturn \"\"\n\t\t\t\t})\n\t\t})\n\t}\n\n\treturn { claimCallback }\n}"]},"metadata":{},"sourceType":"module"}