{"ast":null,"code":"var _jsxFileName = \"/Users/sidshekhar/Documents/interface/src/components/SearchModal/CurrencySearch.tsx\";\nimport { CAVAX } from '@pangolindex/sdk';\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport ReactGA from 'react-ga';\nimport { useTranslation } from 'react-i18next';\nimport { Text } from 'rebass';\nimport { ThemeContext } from 'styled-components';\nimport { useActiveWeb3React } from '../../hooks';\nimport { useAllTokens, useToken } from '../../hooks/Tokens';\nimport { useSelectedListInfo } from '../../state/lists/hooks';\nimport { CloseIcon, LinkStyledButton, TYPE } from '../../theme';\nimport { isAddress } from '../../utils';\nimport Card from '../Card';\nimport Column from '../Column';\nimport ListLogo from '../ListLogo';\nimport QuestionHelper from '../QuestionHelper';\nimport Row, { RowBetween } from '../Row';\nimport CommonBases from './CommonBases';\nimport CurrencyList from './CurrencyList';\nimport { filterTokens } from './filtering';\nimport SortButton from './SortButton';\nimport { useTokenComparator } from './sorting';\nimport { PaddedColumn, SearchInput, Separator } from './styleds';\nimport AutoSizer from 'react-virtualized-auto-sizer';\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  showCommonBases,\n  onDismiss,\n  isOpen,\n  onChangeList\n}) {\n  const {\n    t\n  } = useTranslation();\n  const {\n    chainId\n  } = useActiveWeb3React();\n  const theme = useContext(ThemeContext);\n  const fixedList = useRef();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [invertSearchOrder, setInvertSearchOrder] = useState(false);\n  const allTokens = useAllTokens(); // if they input an address, use it\n\n  const isAddressSearch = isAddress(searchQuery);\n  const searchToken = useToken(searchQuery);\n  useEffect(() => {\n    if (isAddressSearch) {\n      ReactGA.event({\n        category: 'Currency Select',\n        action: 'Search by address',\n        label: isAddressSearch\n      });\n    }\n  }, [isAddressSearch]);\n  const showETH = useMemo(() => {\n    const s = searchQuery.toLowerCase().trim();\n    return s === '' || s === 'e' || s === 'et' || s === 'eth';\n  }, [searchQuery]);\n  const tokenComparator = useTokenComparator(invertSearchOrder);\n  const filteredTokens = useMemo(() => {\n    if (isAddressSearch) return searchToken ? [searchToken] : [];\n    return filterTokens(Object.values(allTokens), searchQuery);\n  }, [isAddressSearch, searchToken, allTokens, searchQuery]);\n  const filteredSortedTokens = useMemo(() => {\n    if (searchToken) return [searchToken];\n    const sorted = filteredTokens.sort(tokenComparator);\n    const symbolMatch = searchQuery.toLowerCase().split(/\\s+/).filter(s => s.length > 0);\n    if (symbolMatch.length > 1) return sorted;\n    return [...(searchToken ? [searchToken] : []), // sort any exact symbol matches first\n    ...sorted.filter(token => {\n      var _token$symbol;\n\n      return ((_token$symbol = token.symbol) === null || _token$symbol === void 0 ? void 0 : _token$symbol.toLowerCase()) === symbolMatch[0];\n    }), ...sorted.filter(token => {\n      var _token$symbol2;\n\n      return ((_token$symbol2 = token.symbol) === null || _token$symbol2 === void 0 ? void 0 : _token$symbol2.toLowerCase()) !== symbolMatch[0];\n    })];\n  }, [filteredTokens, searchQuery, searchToken, tokenComparator]);\n  const handleCurrencySelect = useCallback(currency => {\n    onCurrencySelect(currency);\n    onDismiss();\n  }, [onDismiss, onCurrencySelect]); // clear the input on open\n\n  useEffect(() => {\n    if (isOpen) setSearchQuery('');\n  }, [isOpen]); // manage focus on modal show\n\n  const inputRef = useRef();\n  const handleInput = useCallback(event => {\n    var _fixedList$current;\n\n    const input = event.target.value;\n    const checksummedInput = isAddress(input);\n    setSearchQuery(checksummedInput || input);\n    (_fixedList$current = fixedList.current) === null || _fixedList$current === void 0 ? void 0 : _fixedList$current.scrollTo(0);\n  }, []);\n  const handleEnter = useCallback(e => {\n    if (e.key === 'Enter') {\n      const s = searchQuery.toLowerCase().trim();\n\n      if (s === 'eth') {\n        handleCurrencySelect(CAVAX);\n      } else if (filteredSortedTokens.length > 0) {\n        var _filteredSortedTokens;\n\n        if (((_filteredSortedTokens = filteredSortedTokens[0].symbol) === null || _filteredSortedTokens === void 0 ? void 0 : _filteredSortedTokens.toLowerCase()) === searchQuery.trim().toLowerCase() || filteredSortedTokens.length === 1) {\n          handleCurrencySelect(filteredSortedTokens[0]);\n        }\n      }\n    }\n  }, [filteredSortedTokens, handleCurrencySelect, searchQuery]);\n  const selectedListInfo = useSelectedListInfo();\n  return /*#__PURE__*/React.createElement(Column, {\n    style: {\n      width: '100%',\n      flex: '1 1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(PaddedColumn, {\n    gap: \"14px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(RowBetween, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    fontWeight: 500,\n    fontSize: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 11\n    }\n  }, t('searchModal.selectToken'), /*#__PURE__*/React.createElement(QuestionHelper, {\n    text: t('searchModal.findToken'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(CloseIcon, {\n    onClick: onDismiss,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(SearchInput, {\n    type: \"text\",\n    id: \"token-search-input\",\n    placeholder: t('searchModal.tokenSearchPlaceholder'),\n    value: searchQuery,\n    ref: inputRef,\n    onChange: handleInput,\n    onKeyDown: handleEnter,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }), showCommonBases && /*#__PURE__*/React.createElement(CommonBases, {\n    chainId: chainId,\n    onSelect: handleCurrencySelect,\n    selectedCurrency: selectedCurrency,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(RowBetween, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    fontSize: 14,\n    fontWeight: 500,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }, t('searchModal.tokenName')), /*#__PURE__*/React.createElement(SortButton, {\n    ascending: invertSearchOrder,\n    toggleSortOrder: () => setInvertSearchOrder(iso => !iso),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Separator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      flex: '1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(AutoSizer, {\n    disableWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, ({\n    height\n  }) => /*#__PURE__*/React.createElement(CurrencyList, {\n    height: height,\n    showETH: showETH,\n    currencies: filteredSortedTokens,\n    onCurrencySelect: handleCurrencySelect,\n    otherCurrency: otherSelectedCurrency,\n    selectedCurrency: selectedCurrency,\n    fixedListRef: fixedList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Separator, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, selectedListInfo.multipleSelected ? /*#__PURE__*/React.createElement(LinkStyledButton, {\n    style: {\n      fontWeight: 500,\n      color: theme.text2,\n      fontSize: 16,\n      textAlign: 'center',\n      width: '100%'\n    },\n    onClick: onChangeList,\n    id: \"currency-search-change-list-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 11\n    }\n  }, t('searchModal.manageTokenLists')) : /*#__PURE__*/React.createElement(RowBetween, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 11\n    }\n  }, selectedListInfo.current ? /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 15\n    }\n  }, selectedListInfo.current.logoURI ? /*#__PURE__*/React.createElement(ListLogo, {\n    style: {\n      marginRight: 12\n    },\n    logoURI: selectedListInfo.current.logoURI,\n    alt: `${selectedListInfo.current.name} list logo`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 19\n    }\n  }) : null, /*#__PURE__*/React.createElement(TYPE.main, {\n    id: \"currency-search-selected-list-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 17\n    }\n  }, selectedListInfo.current.name)) : null, /*#__PURE__*/React.createElement(LinkStyledButton, {\n    style: {\n      fontWeight: 500,\n      color: theme.text2,\n      fontSize: 16\n    },\n    onClick: onChangeList,\n    id: \"currency-search-change-list-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }\n  }, selectedListInfo.current ? t('searchModal.change') : t('searchModal.selectList')))));\n}","map":{"version":3,"sources":["/Users/sidshekhar/Documents/interface/src/components/SearchModal/CurrencySearch.tsx"],"names":["CAVAX","React","useCallback","useContext","useEffect","useMemo","useRef","useState","ReactGA","useTranslation","Text","ThemeContext","useActiveWeb3React","useAllTokens","useToken","useSelectedListInfo","CloseIcon","LinkStyledButton","TYPE","isAddress","Card","Column","ListLogo","QuestionHelper","Row","RowBetween","CommonBases","CurrencyList","filterTokens","SortButton","useTokenComparator","PaddedColumn","SearchInput","Separator","AutoSizer","CurrencySearch","selectedCurrency","onCurrencySelect","otherSelectedCurrency","showCommonBases","onDismiss","isOpen","onChangeList","t","chainId","theme","fixedList","searchQuery","setSearchQuery","invertSearchOrder","setInvertSearchOrder","allTokens","isAddressSearch","searchToken","event","category","action","label","showETH","s","toLowerCase","trim","tokenComparator","filteredTokens","Object","values","filteredSortedTokens","sorted","sort","symbolMatch","split","filter","length","token","symbol","handleCurrencySelect","currency","inputRef","handleInput","input","target","value","checksummedInput","current","scrollTo","handleEnter","e","key","selectedListInfo","width","flex","iso","height","multipleSelected","fontWeight","color","text2","fontSize","textAlign","logoURI","marginRight","name"],"mappings":"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","sourcesContent":["import { Currency, CAVAX, Token } from '@pangolindex/sdk'\nimport React, { KeyboardEvent, RefObject, useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react'\nimport ReactGA from 'react-ga'\nimport { useTranslation } from 'react-i18next'\nimport { FixedSizeList } from 'react-window'\nimport { Text } from 'rebass'\nimport { ThemeContext } from 'styled-components'\nimport { useActiveWeb3React } from '../../hooks'\nimport { useAllTokens, useToken } from '../../hooks/Tokens'\nimport { useSelectedListInfo } from '../../state/lists/hooks'\nimport { CloseIcon, LinkStyledButton, TYPE } from '../../theme'\nimport { isAddress } from '../../utils'\nimport Card from '../Card'\nimport Column from '../Column'\nimport ListLogo from '../ListLogo'\nimport QuestionHelper from '../QuestionHelper'\nimport Row, { RowBetween } from '../Row'\nimport CommonBases from './CommonBases'\nimport CurrencyList from './CurrencyList'\nimport { filterTokens } from './filtering'\nimport SortButton from './SortButton'\nimport { useTokenComparator } from './sorting'\nimport { PaddedColumn, SearchInput, Separator } from './styleds'\nimport AutoSizer from 'react-virtualized-auto-sizer'\n\ninterface CurrencySearchProps {\n  isOpen: boolean\n  onDismiss: () => void\n  selectedCurrency?: Currency | null\n  onCurrencySelect: (currency: Currency) => void\n  otherSelectedCurrency?: Currency | null\n  showCommonBases?: boolean\n  onChangeList: () => void\n}\n\nexport function CurrencySearch({\n  selectedCurrency,\n  onCurrencySelect,\n  otherSelectedCurrency,\n  showCommonBases,\n  onDismiss,\n  isOpen,\n  onChangeList\n}: CurrencySearchProps) {\n  const { t } = useTranslation()\n  const { chainId } = useActiveWeb3React()\n  const theme = useContext(ThemeContext)\n\n  const fixedList = useRef<FixedSizeList>()\n  const [searchQuery, setSearchQuery] = useState<string>('')\n  const [invertSearchOrder, setInvertSearchOrder] = useState<boolean>(false)\n  const allTokens = useAllTokens()\n\n  // if they input an address, use it\n  const isAddressSearch = isAddress(searchQuery)\n  const searchToken = useToken(searchQuery)\n\n  useEffect(() => {\n    if (isAddressSearch) {\n      ReactGA.event({\n        category: 'Currency Select',\n        action: 'Search by address',\n        label: isAddressSearch\n      })\n    }\n  }, [isAddressSearch])\n\n  const showETH: boolean = useMemo(() => {\n    const s = searchQuery.toLowerCase().trim()\n    return s === '' || s === 'e' || s === 'et' || s === 'eth'\n  }, [searchQuery])\n\n  const tokenComparator = useTokenComparator(invertSearchOrder)\n\n  const filteredTokens: Token[] = useMemo(() => {\n    if (isAddressSearch) return searchToken ? [searchToken] : []\n    return filterTokens(Object.values(allTokens), searchQuery)\n  }, [isAddressSearch, searchToken, allTokens, searchQuery])\n\n  const filteredSortedTokens: Token[] = useMemo(() => {\n    if (searchToken) return [searchToken]\n    const sorted = filteredTokens.sort(tokenComparator)\n    const symbolMatch = searchQuery\n      .toLowerCase()\n      .split(/\\s+/)\n      .filter(s => s.length > 0)\n    if (symbolMatch.length > 1) return sorted\n\n    return [\n      ...(searchToken ? [searchToken] : []),\n      // sort any exact symbol matches first\n      ...sorted.filter(token => token.symbol?.toLowerCase() === symbolMatch[0]),\n      ...sorted.filter(token => token.symbol?.toLowerCase() !== symbolMatch[0])\n    ]\n  }, [filteredTokens, searchQuery, searchToken, tokenComparator])\n\n  const handleCurrencySelect = useCallback(\n    (currency: Currency) => {\n      onCurrencySelect(currency)\n      onDismiss()\n    },\n    [onDismiss, onCurrencySelect]\n  )\n\n  // clear the input on open\n  useEffect(() => {\n    if (isOpen) setSearchQuery('')\n  }, [isOpen])\n\n  // manage focus on modal show\n  const inputRef = useRef<HTMLInputElement>()\n  const handleInput = useCallback(event => {\n    const input = event.target.value\n    const checksummedInput = isAddress(input)\n    setSearchQuery(checksummedInput || input)\n    fixedList.current?.scrollTo(0)\n  }, [])\n\n  const handleEnter = useCallback(\n    (e: KeyboardEvent<HTMLInputElement>) => {\n      if (e.key === 'Enter') {\n        const s = searchQuery.toLowerCase().trim()\n        if (s === 'eth') {\n          handleCurrencySelect(CAVAX)\n        } else if (filteredSortedTokens.length > 0) {\n          if (\n            filteredSortedTokens[0].symbol?.toLowerCase() === searchQuery.trim().toLowerCase() ||\n            filteredSortedTokens.length === 1\n          ) {\n            handleCurrencySelect(filteredSortedTokens[0])\n          }\n        }\n      }\n    },\n    [filteredSortedTokens, handleCurrencySelect, searchQuery]\n  )\n\n  const selectedListInfo = useSelectedListInfo()\n\n  return (\n    <Column style={{ width: '100%', flex: '1 1' }}>\n      <PaddedColumn gap=\"14px\">\n        <RowBetween>\n          <Text fontWeight={500} fontSize={16}>\n            {t('searchModal.selectToken')}\n            <QuestionHelper text={t('searchModal.findToken')} />\n          </Text>\n          <CloseIcon onClick={onDismiss} />\n        </RowBetween>\n        <SearchInput\n          type=\"text\"\n          id=\"token-search-input\"\n          placeholder={t('searchModal.tokenSearchPlaceholder')}\n          value={searchQuery}\n          ref={inputRef as RefObject<HTMLInputElement>}\n          onChange={handleInput}\n          onKeyDown={handleEnter}\n        />\n        {showCommonBases && (\n          <CommonBases chainId={chainId} onSelect={handleCurrencySelect} selectedCurrency={selectedCurrency} />\n        )}\n        <RowBetween>\n          <Text fontSize={14} fontWeight={500}>\n            {t('searchModal.tokenName')}\n          </Text>\n          <SortButton ascending={invertSearchOrder} toggleSortOrder={() => setInvertSearchOrder(iso => !iso)} />\n        </RowBetween>\n      </PaddedColumn>\n\n      <Separator />\n\n      <div style={{ flex: '1' }}>\n        <AutoSizer disableWidth>\n          {({ height }) => (\n            <CurrencyList\n              height={height}\n              showETH={showETH}\n              currencies={filteredSortedTokens}\n              onCurrencySelect={handleCurrencySelect}\n              otherCurrency={otherSelectedCurrency}\n              selectedCurrency={selectedCurrency}\n              fixedListRef={fixedList}\n            />\n          )}\n        </AutoSizer>\n      </div>\n\n      <Separator />\n      <Card>\n        {selectedListInfo.multipleSelected ? (\n          <LinkStyledButton\n            style={{ fontWeight: 500, color: theme.text2, fontSize: 16, textAlign: 'center', width: '100%' }}\n            onClick={onChangeList}\n            id=\"currency-search-change-list-button\"\n          >\n            {t('searchModal.manageTokenLists')}\n          </LinkStyledButton>\n        ) : (\n          <RowBetween>\n            {selectedListInfo.current ? (\n              <Row>\n                {selectedListInfo.current.logoURI ? (\n                  <ListLogo\n                    style={{ marginRight: 12 }}\n                    logoURI={selectedListInfo.current.logoURI}\n                    alt={`${selectedListInfo.current.name} list logo`}\n                  />\n                ) : null}\n                <TYPE.main id=\"currency-search-selected-list-name\">{selectedListInfo.current.name}</TYPE.main>\n              </Row>\n            ) : null}\n            <LinkStyledButton\n              style={{ fontWeight: 500, color: theme.text2, fontSize: 16 }}\n              onClick={onChangeList}\n              id=\"currency-search-change-list-button\"\n            >\n              {selectedListInfo.current ? t('searchModal.change') : t('searchModal.selectList')}\n            </LinkStyledButton>\n          </RowBetween>\n        )}\n      </Card>\n    </Column>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}